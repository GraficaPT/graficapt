<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8">
  <title>Teste Carrossel</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    .carrossel-container {
      position: relative;
      overflow: hidden;
      width: 100%;
      max-width: 600px;
      margin: 1rem auto;
      border: 1px solid #ddd;
      padding: 8px;
      background: #fafafa;
    }

    .carrossel-imagens-wrapper {
      overflow: hidden;
    }

    .carrossel-imagens {
      display: flex;
      transition: transform .35s ease;
      width: 100%;
    }

    .carrossel-img {
      min-width: 100%;
      object-fit: contain;
      display: block;
      user-select: none;
    }

    .indicadores {
      display: flex;
      justify-content: center;
      gap: 6px;
      margin-top: 10px;
    }

    .indicador {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #ccc;
      cursor: pointer;
      flex-shrink: 0;
      transition: background .2s;
    }

    .indicador.ativo {
      background: #333;
    }

    .carrossel-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255,255,255,0.9);
      border: none;
      padding: 8px 14px;
      cursor: pointer;
      font-size: 18px;
      z-index: 5;
      border-radius: 4px;
      box-shadow: 0 2px 6px rgba(0,0,0,.15);
    }

    .carrossel-btn.prev { left: 6px; }
    .carrossel-btn.next { right: 6px; }
  </style>
</head>
<body>

  <h2 style="text-align:center;">Carrossel de Teste</h2>
  <div id="demo-carrossel"></div>

  <script type="module">
    // carrossel interno (simplificado, igual à versão modular)
    function createCarousel(imagens) {
      const container = document.createElement('div');
      container.className = 'carrossel-container';

      let imagemAtual = 0;

      const prev = document.createElement('button');
      prev.className = 'carrossel-btn prev';
      prev.setAttribute('aria-label', 'Anterior');
      prev.innerHTML = '&#10094;';

      const next = document.createElement('button');
      next.className = 'carrossel-btn next';
      next.setAttribute('aria-label', 'Seguinte');
      next.innerHTML = '&#10095;';

      const wrapper = document.createElement('div');
      wrapper.className = 'carrossel-imagens-wrapper';

      const inner = document.createElement('div');
      inner.className = 'carrossel-imagens';

      if (!imagens || imagens.length === 0) {
        const noImg = document.createElement('div');
        noImg.textContent = 'Sem imagens disponíveis';
        container.appendChild(noImg);
        return container;
      }

      imagens.forEach((url, idx) => {
        const img = document.createElement('img');
        img.src = url;
        img.alt = `Imagem ${idx+1}`;
        img.className = 'carrossel-img';
        img.loading = 'lazy';
        img.onerror = () => {
          img.style.opacity = '0.4';
          img.alt = 'Erro a carregar';
        };
        inner.appendChild(img);
      });

      wrapper.appendChild(inner);
      container.append(prev, wrapper, next);

      const indicadores = document.createElement('div');
      indicadores.className = 'indicadores';

      function atualizarIndicadores() {
        Array.from(indicadores.children).forEach((el, i) => {
          el.classList.toggle('ativo', i === imagemAtual);
        });
      }

      function irParaImagem(index) {
        imagemAtual = index;
        inner.style.transform = `translateX(-${imagemAtual * 100}%)`;
        atualizarIndicadores();
      }

      function mudarImagem(delta) {
        const total = imagens.length;
        imagemAtual = (imagemAtual + delta + total) % total;
        inner.style.transform = `translateX(-${imagemAtual * 100}%)`;
        atualizarIndicadores();
      }

      imagens.forEach((_, i) => {
        const dot = document.createElement('div');
        dot.className = 'indicador' + (i===0 ? ' ativo' : '');
        dot.addEventListener('click', () => irParaImagem(i));
        indicadores.appendChild(dot);
      });

      prev.addEventListener('click', () => mudarImagem(-1));
      next.addEventListener('click', () => mudarImagem(1));

      // inicialização
      inner.style.transform = 'translateX(0%)';
      atualizarIndicadores();

      container.appendChild(indicadores);
      return container;
    }

    // exemplo de imagens (usa placeholder; substitui pelos teus URLs efetivos)
    const imagensExemplo = [
      'https://via.placeholder.com/800x400?text=Imagem+1',
      'https://via.placeholder.com/800x400?text=Imagem+2',
      'https://via.placeholder.com/800x400?text=Imagem+3'
    ];

    document.getElementById('demo-carrossel').appendChild(createCarousel(imagensExemplo));
  </script>

</body>
</html>
